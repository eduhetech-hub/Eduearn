<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn & Earn - EduHeTech</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #1d4ed8;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        
        .card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-radius: 0.5rem;
            color: white;
            transition: transform 0.1s ease;
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            transform: translateY(-1px);
        }
        
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(3px);
            z-index: 50;
        }
        
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateY(10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .course-status-badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 600;
        }
        
        .status-pending { background-color: #fef3c7; color: #92400e; }
        .status-completed { background-color: #d1fae5; color: #065f46; }
        .status-available { background-color: #dbeafe; color: #1e40af; }
        
        .screenshot-preview {
            max-height: 300px;
            border: 2px dashed #d1d5db;
            border-radius: 0.5rem;
        }
    </style>
</head>
<body class="text-gray-800">
    <!-- Navigation Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <a href="index.html" class="text-xl font-bold text-blue-600">EduHeTech</a>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2 bg-blue-50 px-3 py-1 rounded-full">
                        <i class="fas fa-coins text-yellow-500"></i>
                        <span id="points-balance" class="font-semibold">0</span>
                    </div>
                    <button onclick="handleLogout()" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition">
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 py-6">
        <div class="space-y-6">
            <!-- Page Header -->
            <div class="flex justify-between items-center">
                <h1 class="text-2xl font-bold text-gray-800">Learn & Earn</h1>
                <div class="flex items-center space-x-2">
                    <i class="fas fa-book text-blue-500"></i>
                    <span class="text-sm text-gray-600">Earn 500 points after verification</span>
                </div>
            </div>

            <!-- Verification Info Banner -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <div class="flex items-start">
                    <i class="fas fa-info-circle text-blue-500 mt-1 mr-3"></i>
                    <div>
                        <h3 class="font-semibold text-blue-800 mb-2">Course Completion Verification Required</h3>
                        <p class="text-sm text-blue-700">
                            After completing a course on Alison, upload a screenshot of your certificate or completion page to receive your 500 points.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Courses Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="courses-container">
                <!-- Courses will be loaded here -->
            </div>

            <!-- How It Works Section -->
            <div class="card p-6">
                <h3 class="text-lg font-semibold mb-4">How to Complete Courses</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="text-center p-4 bg-blue-50 rounded-lg">
                        <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto mb-3">1</div>
                        <h4 class="font-semibold mb-2">Complete Course on Alison</h4>
                        <p class="text-sm text-gray-600">Finish all modules and pass the assessment on Alison</p>
                    </div>
                    <div class="text-center p-4 bg-green-50 rounded-lg">
                        <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto mb-3">2</div>
                        <h4 class="font-semibold mb-2">Take Screenshot</h4>
                        <p class="text-sm text-gray-600">Capture your certificate or completion page</p>
                    </div>
                    <div class="text-center p-4 bg-purple-50 rounded-lg">
                        <div class="w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto mb-3">3</div>
                        <h4 class="font-semibold mb-2">Upload & Verify</h4>
                        <p class="text-sm text-gray-600">Submit screenshot for quick review</p>
                    </div>
                </div>
            </div>

            <!-- Screenshot Guidelines -->
            <div class="card p-6">
                <h3 class="text-lg font-semibold mb-4">Screenshot Requirements</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold text-green-600 mb-3">‚úÖ What to Include:</h4>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li class="flex items-start">
                                <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                <span>Your full name visible</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                <span>Course title clearly shown</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                <span>Completion status or certificate</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                <span>Alison platform visible</span>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold text-red-600 mb-3">‚ùå What to Avoid:</h4>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li class="flex items-start">
                                <i class="fas fa-times text-red-500 mt-1 mr-2"></i>
                                <span>Blurry or cropped images</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-times text-red-500 mt-1 mr-2"></i>
                                <span>Personal information hidden</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-times text-red-500 mt-1 mr-2"></i>
                                <span>Incomplete course pages</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-times text-red-500 mt-1 mr-2"></i>
                                <span>Edited or fake screenshots</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Verification Modal -->
    <div id="verification-modal" class="modal-overlay fixed inset-0 hidden flex items-center justify-center p-4 z-50">
        <div class="card w-full max-w-2xl p-6 space-y-4 slide-in max-h-[90vh] overflow-y-auto">
            <div id="modal-content">
                <!-- Modal content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loading-spinner" class="fixed inset-0 bg-white bg-opacity-80 flex items-center justify-center hidden z-50">
        <div class="loader"></div>
    </div>

    <script>
        // =====================================================
        // APPLICATION STATE AND CONFIGURATION
        // =====================================================
        
        const BASE_POINTS_REWARDS = {
            lesson: 500
        };

        const COURSE_VERIFICATION_STATES = {
            PENDING: 'pending',
            APPROVED: 'approved',
            AVAILABLE: 'available'
        };

        // Mock courses data
        const COURSES = [
            {
                id: 'health-1',
                title: 'Introduction to Complementary and Alternative Medicine',
                category: 'Health & Medicine',
                duration: 10,
                points: 500,
                alisonUrl: 'https://alison.com/courses/health',
                description: 'Learn about alternative medicine practices and their applications.',
                verificationExample: 'health-verification.jpg'
            },
            {
                id: 'tech-1',
                title: 'Introduction to Web Development',
                category: 'Technology',
                duration: 15,
                points: 500,
                alisonUrl: 'https://alison.com/courses/web-development',
                description: 'Build foundational knowledge in HTML, CSS, and JavaScript.',
                verificationExample: 'tech-verification.jpg'
            },
            {
                id: 'business-1',
                title: 'Digital Marketing Fundamentals',
                category: 'Business',
                duration: 12,
                points: 500,
                alisonUrl: 'https://alison.com/courses/digital-marketing',
                description: 'Master the basics of online marketing and social media strategies.',
                verificationExample: 'business-verification.jpg'
            },
            {
                id: 'language-1',
                title: 'Business English Communication',
                category: 'Language',
                duration: 8,
                points: 500,
                alisonUrl: 'https://alison.com/courses/business-english',
                description: 'Improve your professional English communication skills.',
                verificationExample: 'language-verification.jpg'
            },
            {
                id: 'tech-2',
                title: 'Python Programming Basics',
                category: 'Technology',
                duration: 20,
                points: 500,
                alisonUrl: 'https://alison.com/courses/python',
                description: 'Learn Python programming from scratch with practical examples.',
                verificationExample: 'python-verification.jpg'
            },
            {
                id: 'health-2',
                title: 'Nutrition and Healthy Eating',
                category: 'Health & Medicine',
                duration: 14,
                points: 500,
                alisonUrl: 'https://alison.com/courses/nutrition',
                description: 'Understand the principles of nutrition and healthy eating habits.',
                verificationExample: 'nutrition-verification.jpg'
            }
        ];

        // Application state
        const state = {
            user: null,
            userPoints: 0,
            completedCourses: {},
            pendingVerifications: {},
            currentScreenshot: null
        };

        // =====================================================
        // UTILITY FUNCTIONS
        // =====================================================

        function showLoading(show) {
            const loader = document.getElementById('loading-spinner');
            if (loader) {
                loader.style.display = show ? 'flex' : 'none';
            }
        }

        function showModal(content) {
            const modal = document.getElementById('verification-modal');
            const modalContent = document.getElementById('modal-content');
            
            if (modal && modalContent) {
                modalContent.innerHTML = content;
                modal.classList.remove('hidden');
            }
        }

        function hideModal() {
            const modal = document.getElementById('verification-modal');
            if (modal) {
                modal.classList.add('hidden');
            }
            // Reset screenshot state
            state.currentScreenshot = null;
        }

        function formatPoints(points) {
            return points?.toLocaleString() || '0';
        }

        // =====================================================
        // SCREENSHOT VERIFICATION SYSTEM
        // =====================================================

        function getCourseVerificationStatus(courseId) {
            if (state.completedCourses[courseId]) {
                return COURSE_VERIFICATION_STATES.APPROVED;
            }
            if (state.pendingVerifications[courseId]) {
                return COURSE_VERIFICATION_STATES.PENDING;
            }
            return COURSE_VERIFICATION_STATES.AVAILABLE;
        }

        function requestCourseVerification(courseId, courseTitle) {
            showModal(`
                <div class="space-y-4">
                    <div class="text-center">
                        <i class="fas fa-camera text-5xl text-blue-500 mb-2"></i>
                        <h3 class="text-xl font-bold">Verify Course Completion</h3>
                        <p class="text-gray-600">Upload a screenshot of your <strong>"${courseTitle}"</strong> completion</p>
                    </div>
                    
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h4 class="font-semibold text-blue-800 mb-2">üì∏ Required in Screenshot:</h4>
                        <ul class="text-sm text-blue-700 space-y-1">
                            <li>‚Ä¢ Your full name visible</li>
                            <li>‚Ä¢ Course title clearly shown</li>
                            <li>‚Ä¢ Completion status or certificate</li>
                            <li>‚Ä¢ Alison platform visible</li>
                        </ul>
                    </div>

                    <div id="screenshot-upload-area" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition-colors">
                        <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                        <p class="text-sm text-gray-600">Click to upload screenshot</p>
                        <p class="text-xs text-gray-500">JPG, PNG, or WebP (Max 5MB)</p>
                        <input type="file" id="screenshot-file" accept="image/*" class="hidden" onchange="handleScreenshotUpload(this.files[0], '${courseId}')">
                    </div>

                    <div id="upload-preview" class="hidden">
                        <img id="preview-image" class="screenshot-preview w-full object-contain">
                        <div class="flex justify-center space-x-2 mt-3">
                            <button onclick="removeScreenshot()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded text-sm transition">
                                <i class="fas fa-times mr-1"></i>Remove
                            </button>
                            <button onclick="retakeScreenshot()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded text-sm transition">
                                <i class="fas fa-sync mr-1"></i>Retake
                            </button>
                        </div>
                    </div>

                    <div class="flex space-x-2">
                        <button onclick="hideModal()" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 rounded transition">
                            Cancel
                        </button>
                        <button id="submit-verification" onclick="submitVerification('${courseId}', '${courseTitle}')" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded transition" disabled>
                            Submit for Review
                        </button>
                    </div>

                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                        <p class="text-sm text-yellow-700">
                            <i class="fas fa-clock mr-1"></i>
                            Verification usually takes 1-6 hours during business days
                        </p>
                    </div>
                </div>
            `);

            // Setup file upload click
            document.getElementById('screenshot-upload-area').addEventListener('click', () => {
                document.getElementById('screenshot-file').click();
            });
        }

        function handleScreenshotUpload(file, courseId) {
            if (!file) return;

            // Validate file type
            const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
            if (!validTypes.includes(file.type)) {
                showModal(`
                    <div class="text-center space-y-3">
                        <i class="fas fa-exclamation-triangle text-5xl text-red-500"></i>
                        <h3 class="text-xl font-bold text-red-600">Invalid File Type</h3>
                        <p class="text-gray-600">Please upload JPG, PNG, or WebP images only.</p>
                    </div>
                `);
                return;
            }

            // Validate file size (5MB max)
            if (file.size > 5 * 1024 * 1024) {
                showModal(`
                    <div class="text-center space-y-3">
                        <i class="fas fa-exclamation-triangle text-5xl text-red-500"></i>
                        <h3 class="text-xl font-bold text-red-600">File Too Large</h3>
                        <p class="text-gray-600">Please upload images smaller than 5MB.</p>
                    </div>
                `);
                return;
            }

            // Store file in state
            state.currentScreenshot = {
                courseId: courseId,
                file: file,
                timestamp: Date.now()
            };

            // Show preview
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('preview-image').src = e.target.result;
                document.getElementById('upload-preview').classList.remove('hidden');
                document.getElementById('screenshot-upload-area').classList.add('hidden');
                document.getElementById('submit-verification').disabled = false;
            };
            reader.readAsDataURL(file);
        }

        function removeScreenshot() {
            state.currentScreenshot = null;
            document.getElementById('upload-preview').classList.add('hidden');
            document.getElementById('screenshot-upload-area').classList.remove('hidden');
            document.getElementById('submit-verification').disabled = true;
            document.getElementById('screenshot-file').value = '';
        }

        function retakeScreenshot() {
            removeScreenshot();
            document.getElementById('screenshot-file').click();
        }

        async function submitVerification(courseId, courseTitle) {
            if (!state.currentScreenshot || !state.currentScreenshot.file) {
                showModal(`
                    <div class="text-center space-y-3">
                        <i class="fas fa-exclamation-triangle text-5xl text-red-500"></i>
                        <h3 class="text-xl font-bold text-red-600">No Screenshot</h3>
                        <p class="text-gray-600">Please upload a screenshot first.</p>
                    </div>
                `);
                return;
            }

            showLoading(true);

            // Simulate upload and verification process
            setTimeout(() => {
                showLoading(false);
                
                // In production, this would upload to your server
                // For demo, we'll simulate successful submission
                state.pendingVerifications[courseId] = {
                    submittedAt: Date.now(),
                    status: 'pending'
                };

                // Save to localStorage
                localStorage.setItem('eduhetech_pending_verifications', JSON.stringify(state.pendingVerifications));

                showModal(`
                    <div class="text-center space-y-3">
                        <i class="fas fa-check-circle text-5xl text-green-500"></i>
                        <h3 class="text-xl font-bold text-green-600">Verification Submitted!</h3>
                        <p class="text-gray-600">Your course completion has been submitted for review.</p>
                        <p class="text-sm text-blue-600">You'll receive ${BASE_POINTS_REWARDS.lesson} points once approved.</p>
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                            <p class="text-sm text-yellow-700">
                                <i class="fas fa-clock mr-1"></i>
                                Review time: 1-6 hours during business days
                            </p>
                        </div>
                    </div>
                `);

                // Update UI
                setTimeout(() => {
                    hideModal();
                    renderCourses();
                }, 3000);
            }, 2000);
        }

        // Simulate admin approval (for demo purposes)
        function simulateAdminApproval(courseId) {
            if (state.pendingVerifications[courseId]) {
                // Mark as completed
                state.completedCourses[courseId] = Date.now();
                state.userPoints += BASE_POINTS_REWARDS.lesson;
                
                // Remove from pending
                delete state.pendingVerifications[courseId];
                
                // Save to localStorage
                localStorage.setItem('eduhetech_completed_courses', JSON.stringify(state.completedCourses));
                localStorage.setItem('eduhetech_user_points', state.userPoints.toString());
                localStorage.setItem('eduhetech_pending_verifications', JSON.stringify(state.pendingVerifications));
                
                // Update UI
                updatePointsDisplay();
                renderCourses();
                
                // Show success notification
                showModal(`
                    <div class="text-center space-y-3">
                        <i class="fas fa-check-circle text-5xl text-green-500"></i>
                        <h3 class="text-xl font-bold text-green-600">Course Verified!</h3>
                        <p class="text-gray-600">Your course completion has been verified and approved.</p>
                        <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                            <p class="text-green-700 font-semibold">
                                <i class="fas fa-coins mr-1"></i>
                                +${BASE_POINTS_REWARDS.lesson} Points Awarded!
                            </p>
                        </div>
                    </div>
                `);
                
                setTimeout(hideModal, 3000);
            }
        }

        // =====================================================
        // COURSE RENDERING AND UI
        // =====================================================

        function renderCourses() {
            const container = document.getElementById('courses-container');
            if (!container) return;

            container.innerHTML = COURSES.map(course => {
                const status = getCourseVerificationStatus(course.id);
                let statusBadge, buttonText, buttonAction, buttonClass, disabled;

                switch (status) {
                    case COURSE_VERIFICATION_STATES.APPROVED:
                        statusBadge = '<span class="course-status-badge status-completed">Completed ‚úì</span>';
                        buttonText = 'Completed';
                        buttonAction = '';
                        buttonClass = 'bg-green-500 cursor-default';
                        disabled = true;
                        break;
                    case COURSE_VERIFICATION_STATES.PENDING:
                        statusBadge = '<span class="course-status-badge status-pending">Under Review</span>';
                        buttonText = 'Verification Pending';
                        buttonAction = '';
                        buttonClass = 'bg-yellow-500 cursor-default';
                        disabled = true;
                        break;
                    default:
                        statusBadge = '<span class="course-status-badge status-available">Available</span>';
                        buttonText = 'Verify Completion';
                        buttonAction = `requestCourseVerification('${course.id}', '${course.title}')`;
                        buttonClass = 'bg-blue-500 hover:bg-blue-600';
                        disabled = false;
                }

                return `
                    <div class="card p-6">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-semibold text-lg">${course.title}</h3>
                            ${statusBadge}
                        </div>
                        
                        <p class="text-sm text-gray-600 mb-4">${course.description}</p>
                        
                        <div class="space-y-2 mb-4">
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">Category:</span>
                                <span class="font-medium">${course.category}</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">Points:</span>
                                <span class="font-bold text-yellow-600">${course.points}</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-600">Duration:</span>
                                <span>${course.duration} min</span>
                            </div>
                        </div>

                        <div class="flex space-x-2">
                            <a href="${course.alisonUrl}" target="_blank" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white text-center py-2 px-3 rounded text-sm transition">
                                <i class="fas fa-external-link-alt mr-1"></i>Open Alison
                            </a>
                            <button onclick="${buttonAction}" 
                                    class="flex-1 ${buttonClass} text-white py-2 px-3 rounded text-sm transition" 
                                    ${disabled ? 'disabled' : ''}>
                                ${buttonText}
                            </button>
                        </div>

                        ${status === COURSE_VERIFICATION_STATES.AVAILABLE ? `
                            <p class="text-xs text-gray-500 mt-2 text-center">
                                Complete on Alison ‚Üí Take Screenshot ‚Üí Upload Here
                            </p>
                        ` : ''}

                        <!-- Demo admin controls (remove in production) -->
                        ${status === COURSE_VERIFICATION_STATES.PENDING ? `
                            <div class="mt-3 pt-3 border-t border-gray-200">
                                <p class="text-xs text-gray-500 mb-2">Demo: Simulate admin approval</p>
                                <button onclick="simulateAdminApproval('${course.id}')" class="w-full bg-green-500 hover:bg-green-600 text-white py-1 rounded text-xs transition">
                                    Approve Verification
                                </button>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        function updatePointsDisplay() {
            const pointsElement = document.getElementById('points-balance');
            if (pointsElement) {
                pointsElement.textContent = formatPoints(state.userPoints);
            }
        }

        // =====================================================
        // USER MANAGEMENT
        // =====================================================

        function handleLogout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('eduhetech_user');
                localStorage.removeItem('eduhetech_user_points');
                localStorage.removeItem('eduhetech_completed_courses');
                localStorage.removeItem('eduhetech_pending_verifications');
                window.location.href = 'index.html';
            }
        }

        function initializeUser() {
            // Load user data from localStorage
            const savedPoints = localStorage.getItem('eduhetech_user_points');
            const savedCourses = localStorage.getItem('eduhetech_completed_courses');
            const savedPending = localStorage.getItem('eduhetech_pending_verifications');

            state.userPoints = savedPoints ? parseInt(savedPoints) : 0;
            state.completedCourses = savedCourses ? JSON.parse(savedCourses) : {};
            state.pendingVerifications = savedPending ? JSON.parse(savedPending) : {};

            updatePointsDisplay();
            renderCourses();
        }

        // =====================================================
        // INITIALIZATION
        // =====================================================

        document.addEventListener('DOMContentLoaded', function() {
            initializeUser();
            
            // Add global click handler to close modal when clicking outside
            document.getElementById('verification-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideModal();
                }
            });
        });

        // Make functions globally available
        window.requestCourseVerification = requestCourseVerification;
        window.handleScreenshotUpload = handleScreenshotUpload;
        window.removeScreenshot = removeScreenshot;
        window.retakeScreenshot = retakeScreenshot;
        window.submitVerification = submitVerification;
        window.simulateAdminApproval = simulateAdminApproval;
        window.handleLogout = handleLogout;
        window.hideModal = hideModal;
    </script>
</body>
</html>
